import{c as l,A as R,_ as U,u as q,a as Y,r as P,w as Q,n as K,b as g,o as v,d as _,e as c,f as A,g as a,h as N,t as z,i as d,j as T,k as H,l as Se,v as we,S as ye,D as Oe,F as W,m as X,p as be,E as Le,C as Pe,q as J,s as $e,x as Ce,y as ke,z as Ie,B as Me,G as je}from"./index-753924cd.js";import{s as ee,g as ze,d as xe,u as te}from"./utils-5dfaf7e4.js";var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"};const Fe=Ve;function ue(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){De(n,i,e[i])})}return n}function De(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var ne=function(t,e){var s=ue({},t,e.attrs);return l(R,ue({},s,{icon:Fe}),null)};ne.displayName="FullscreenExitOutlined";ne.inheritAttrs=!1;const Ee=ne;var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};const Ae=Re;function de(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){Ne(n,i,e[i])})}return n}function Ne(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var se=function(t,e){var s=de({},t,e.attrs);return l(R,de({},s,{icon:Ae}),null)};se.displayName="FullscreenOutlined";se.inheritAttrs=!1;const He=se;var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"};const Be=Te;function ve(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){Ue(n,i,e[i])})}return n}function Ue(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var le=function(t,e){var s=ve({},t,e.attrs);return l(R,ve({},s,{icon:Be}),null)};le.displayName="MenuUnfoldOutlined";le.inheritAttrs=!1;const qe=le;var Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"};const Ye=Ge;function pe(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){Je(n,i,e[i])})}return n}function Je(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var ie=function(t,e){var s=pe({},t,e.attrs);return l(R,pe({},s,{icon:Ye}),null)};ie.displayName="PauseCircleOutlined";ie.inheritAttrs=!1;const Qe=ie;var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};const Xe=We;function fe(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){Ze(n,i,e[i])})}return n}function Ze(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var ae=function(t,e){var s=fe({},t,e.attrs);return l(R,fe({},s,{icon:Xe}),null)};ae.displayName="PlayCircleOutlined";ae.inheritAttrs=!1;const Ke=ae;var et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};const tt=et;function me(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){nt(n,i,e[i])})}return n}function nt(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var ce=function(t,e){var s=me({},t,e.attrs);return l(R,me({},s,{icon:tt}),null)};ce.displayName="UnorderedListOutlined";ce.inheritAttrs=!1;const st=ce;var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M762 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm-508 0v72.4c0 9.5 4.2 18.4 11.4 24.5L564.6 512 265.4 763.1c-7.2 6.1-11.4 15-11.4 24.5V860c0 6.8 7.9 10.5 13.1 6.1L689 512 267.1 157.9A7.95 7.95 0 00254 164z"}}]},name:"vertical-left",theme:"outlined"};const it=lt;function ge(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){at(n,i,e[i])})}return n}function at(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var oe=function(t,e){var s=ge({},t,e.attrs);return l(R,ge({},s,{icon:it}),null)};oe.displayName="VerticalLeftOutlined";oe.inheritAttrs=!1;const ct=oe;var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M326 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm444 72.4V164c0-6.8-7.9-10.5-13.1-6.1L335 512l421.9 354.1c5.2 4.4 13.1.7 13.1-6.1v-72.4c0-9.4-4.2-18.4-11.4-24.5L459.4 512l299.2-251.1c7.2-6.1 11.4-15.1 11.4-24.5z"}}]},name:"vertical-right",theme:"outlined"};const rt=ot;function _e(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),s.forEach(function(i){ut(n,i,e[i])})}return n}function ut(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var re=function(t,e){var s=_e({},t,e.attrs);return l(R,_e({},s,{icon:rt}),null)};re.displayName="VerticalRightOutlined";re.inheritAttrs=!1;const dt=re;const vt={class:"music-box"},pt={key:0,class:"info"},ft={key:1,class:"info"},mt=["src"],gt={class:"center"},_t={class:"prev-next"},ht={class:"progress-box"},yt={class:"ctrl"},Ot=["title"],bt={class:"mode"},Lt=["src","loop"],$t={__name:"MusicCtrl",emits:["toggleMusicList","showSearch","showLyric"],setup(n,{emit:t}){const{useMusicStore:e}=q(),s=()=>{t("toggleMusicList")},i=()=>{t("showSearch")},V=Y(()=>({listCycle:"列表循环",singleCycle:"单曲循环",randomPlay:"随机播放"})[e.settings.mode]),w=u=>{e.changeMode(u)},k=u=>{e.toggleMute(u)},o=P({}),m=P(0),$=P(1e3),y=P(null);Q(()=>[e.activeIndex,e.settings.playing],()=>{o.value=e.musicList[e.activeIndex],K(()=>{y.value&&($.value=parseInt(y.value.duration),y.value.volume=e.settings.volume/100,e.settings.playing&&y.value.play())})},{immediate:!0,deep:!0});const E=()=>{$.value=parseInt(y.value.duration),m.value=y.value.currentTime=e.settings.currentTime},I=u=>{const{currentTime:h,duration:D}=u.target;m.value=e.settings.currentTime=parseInt(h),$.value=parseInt(D)},C=u=>ee(u),F=u=>{e.settings.currentTime=u,y.value&&K(()=>{y.value.currentTime=u})};Q(()=>[e.settings.volume,e.settings.mute],()=>{y.value&&K(()=>{y.value.volume=e.settings.volume/100,y.value.muted=e.settings.mute})},{immediate:!0,deep:!0});const x=()=>{!e.musicList.length||e.activeIndex<0||(e.settings.playing=!0,y.value.play())},r=()=>{!e.musicList.length||e.activeIndex<0||(e.settings.playing=!1,y.value.pause())},p=Y(()=>{if(!e.musicList.length||e.activeIndex<0)return"";let u=e.activeIndex===0?e.musicList.length-1:e.activeIndex-1;return e.musicList[u]?e.musicList[u].name:""}),f=()=>{if(!e.musicList.length||e.activeIndex<0)return;let u=e.activeIndex===0?e.musicList.length-1:e.activeIndex-1;e.playMusic(u)},O=Y(()=>{if(!e.musicList.length||e.activeIndex<0)return"";let u=e.activeIndex===e.musicList.length-1?0:e.activeIndex+1;return e.musicList[u]?e.musicList[u].name:""}),S=()=>{if(!e.musicList.length||e.activeIndex<0)return;let u=e.activeIndex===e.musicList.length-1?0:e.activeIndex+1;e.playMusic(u)},M=()=>{e.settings.mode==="listCycle"?(e.musicList.length===1&&(e.activeIndex--,e.activeIndex++),S()):e.settings.mode==="singleCycle"?e.playMusic(e.activeIndex):e.settings.mode==="randomPlay"&&e.playMusic(ze(0,e.musicList.length-1,e.activeIndex))},j=()=>{t("showLyric")};return(u,h)=>{var b;const D=g("a-tooltip"),G=g("a-slider"),Z=g("a-divider");return v(),_("div",vt,[c(e).musicList.length?(v(),_("div",ft,[a("img",{class:N(["cover",{playing:c(e).settings.playing}]),src:o.value.cover,onerror:"this.src='./images/music.png'",alt:"",onClick:j},null,10,mt),A(" "+z(o.value.name)+" - "+z(o.value.singer),1)])):(v(),_("div",pt,[A(" 暂无音乐，请选择"),a("span",{class:"add",onClick:i},"添加")])),a("div",gt,[a("div",_t,[l(D,{title:`上一首${p.value?"：":""}${p.value}`},{default:d(()=>[l(c(dt),{onClick:f})]),_:1},8,["title"]),l(D,{title:c(e).settings.playing?"点击暂停":"点击播放"},{default:d(()=>[c(e).settings.playing?(v(),T(c(Qe),{key:1,class:"pause",onClick:r})):(v(),T(c(Ke),{key:0,class:"play",onClick:x}))]),_:1},8,["title"]),l(D,{title:`下一首${O.value?"：":""}${O.value}`},{default:d(()=>[l(c(ct),{onClick:S})]),_:1},8,["title"])]),a("div",ht,[a("p",null,z(c(ee)(m.value)),1),l(G,{class:"play-slider",min:0,max:$.value,onChange:F,value:m.value,"onUpdate:value":h[0]||(h[0]=L=>m.value=L),tipFormatter:C},null,8,["max","value"]),a("p",null,z(c(ee)($.value)),1)])]),a("div",yt,[a("div",{class:"volume",title:`当前音量：${c(e).settings.volume}`},[c(e).settings.mute||c(e).settings.volume===0?(v(),_("i",{key:0,class:"ifishfont ifish-volumeDisable",onClick:h[1]||(h[1]=L=>k(!0))})):c(e).settings.volume>=0&&c(e).settings.volume<30?(v(),_("i",{key:1,class:"ifishfont ifish-volumeLow",onClick:h[2]||(h[2]=L=>k(!1))})):c(e).settings.volume>=30&&c(e).settings.volume<60?(v(),_("i",{key:2,class:"ifishfont ifish-volumeMiddle",onClick:h[3]||(h[3]=L=>k(!1))})):(v(),_("i",{key:3,class:"ifishfont ifish-volumeHigh",onClick:h[4]||(h[4]=L=>k(!1))})),l(G,{class:"volume-slider",min:0,max:100,value:c(e).settings.volume,"onUpdate:value":h[5]||(h[5]=L=>c(e).settings.volume=L)},null,8,["value"])],8,Ot),a("div",bt,[l(D,{title:V.value},{default:d(()=>[c(e).settings.mode==="listCycle"?(v(),_("i",{key:0,class:"ifishfont ifish-musicListLoop",title:"列表循环",onClick:h[6]||(h[6]=L=>w("singleCycle"))})):H("",!0),c(e).settings.mode==="singleCycle"?(v(),_("i",{key:1,class:"ifishfont ifish-musicSingleCycle",title:"单曲循环",onClick:h[7]||(h[7]=L=>w("randomPlay"))})):H("",!0),c(e).settings.mode==="randomPlay"?(v(),_("i",{key:2,class:"ifishfont ifish-musicRandomPlay",title:"随机播放",onClick:h[8]||(h[8]=L=>w("listCycle"))})):H("",!0)]),_:1},8,["title"])]),l(Z,{type:"vertical"}),l(D,{title:"播放列表",placement:"topRight"},{default:d(()=>[l(c(qe),{onClick:s})]),_:1}),Se(a("audio",{ref_key:"audioRef",ref:y,controls:"",src:(b=o.value)==null?void 0:b.url,loop:c(e).settings.mode==="singleCycle",onTimeupdate:I,onLoadeddata:E,onEnded:M,onError:M},null,40,Lt),[[we,!1]])])])}}},Ct=U($t,[["__scopeId","data-v-81693d1c"]]);const xt={class:"music-box"},St={class:"title"},wt={class:"music-list"},Pt=["onClick"],kt={class:"music-cover"},It=["src"],Mt={class:"music-info"},jt=["onClick"],zt=["onClick"],Vt=["onClick"],Ft={__name:"MusicList",props:{open:{type:Boolean,default:!1}},emits:["close","showSearch"],setup(n,{emit:t}){const{useMusicStore:e}=q(),s=()=>{t("close")},i=()=>{t("showSearch")},V=()=>{e.musicList=[]},w=m=>{e.playMusic(m)},k=m=>{m<e.activeIndex?(e.musicList.splice(m,1),e.activeIndex--):(m===e.activeIndex&&(e.settings.currentTime=0,e.activeIndex===e.musicList.length-1&&(e.activeIndex=0),e.activeIndex++,e.activeIndex--),e.musicList.splice(m,1))},o=m=>{xe(m.url)};return(m,$)=>{const y=g("a-input"),E=g("a-popconfirm"),I=g("a-empty"),C=g("a-menu-item"),F=g("a-menu"),x=g("a-dropdown"),r=g("perfect-scrollbar"),p=g("a-drawer");return v(),T(p,{width:"360px",title:"播放列表",placement:"right",open:n.open,onClose:s,rootClassName:"disclaimers-root"},{default:d(()=>[a("div",xt,[l(y,{onClick:i,readonly:"",placeholder:"搜索",style:{"border-radius":"20px"}},{prefix:d(()=>[l(c(ye))]),_:1}),a("div",null,[a("p",St,[a("span",null,[l(c(st)),A("播放列表（共 "+z(c(e).musicList.length)+" 首）",1)]),l(E,{title:"确认清空列表？",onConfirm:V},{default:d(()=>[a("span",null,[l(c(Oe)),A("清空列表")])]),_:1})]),c(e).musicList.length?H("",!0):(v(),T(I,{key:0,description:"暂无歌曲，请搜索添加"})),l(r,{class:"scroll-bar"},{default:d(()=>[a("div",wt,[(v(!0),_(W,null,X(c(e).musicList,(f,O)=>(v(),_("div",{class:N(["music-item",{active:c(e).activeIndex===O}]),key:O,onClick:S=>w(O)},[a("div",kt,[a("img",{src:f.cover,onerror:"this.src='./images/music.png'",alt:""},null,8,It)]),a("div",Mt,[a("p",null,z(f.name),1),a("span",null,z(f.singer),1)]),a("div",{class:"music-action",onClick:$[0]||($[0]=be(()=>{},["stop"]))},[l(x,{placement:"bottomLeft",arrow:""},{overlay:d(()=>[l(F,null,{default:d(()=>[l(C,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:S=>w(O)},"播放",8,jt)]),_:2},1024),l(C,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:S=>k(O)},"移除",8,zt)]),_:2},1024),l(C,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:S=>o(f)},"下载",8,Vt)]),_:2},1024)]),_:2},1024)]),default:d(()=>[l(c(Le))]),_:2},1024)])],10,Pt))),128))])]),_:1})])])]),_:1},8,["open"])}}},Dt=U(Ft,[["__scopeId","data-v-18c9e976"]]);const Et=n=>($e("data-v-2f05ab74"),n=n(),Ce(),n),Rt={class:"search"},At={key:0,class:"search-history"},Nt={class:"title"},Ht={class:"search-history-box"},Tt=["onClick"],Bt={class:"text",title:"点击搜索"},Ut={class:"search-list"},qt=Et(()=>a("p",{class:"title"},"搜索结果：",-1)),Gt=["onClick"],Yt={title:"立即播放"},Jt={class:"search-action"},Qt=["onClick"],Wt=["onClick"],Xt=["onClick"],Zt=["onClick"],he=15,Kt={__name:"MusicSearch",setup(n){const{useMusicStore:t}=q(),e=P(""),s=P([]),i=P(!1),V=r=>{t.searchHistory.indexOf(r)<0&&t.searchHistory.unshift(r),o(r)};let w=P(1),k=P(!1);const o=r=>{e.value=r,i.value=!0;const p=`https://api.lolimi.cn/API/qqdg/api.php?msg=${r}&p=${w.value}&sc=${he}`;J.get(p).then(f=>{f.data.code===1?(s.value=[...s.value,...f.data.data],f.data.data.length<he&&(k.value=!0)):k.value=!0,i.value=!1})},m=r=>{if(k.value)return;let p=r.target;p.scrollTop+p.clientHeight>=p.scrollHeight&&(w.value++,o(e.value))},$=()=>{t.searchHistory=[]},y=r=>{const p=t.searchHistory.indexOf(r);t.searchHistory.splice(p,1)},E=async(r,p)=>{const{cover:f,name:O,singer:S,url:M,content:j}=await x(r);t.musicList.push({id:te(21),cover:f,name:O,singer:S,url:M,content:j}),t.playMusic(t.musicList.length-1)},I=async(r,p)=>{const{cover:f,name:O,singer:S,url:M,content:j}=await x(r);t.musicList.push({id:te(21),cover:f,name:O,singer:S,url:M,content:j})},C=async(r,p)=>{const{cover:f,name:O,singer:S,url:M,content:j}=await x(r);t.musicList.splice(t.activeIndex+1,0,{id:te(21),cover:f,name:O,singer:S,url:M,content:j})},F=async(r,p)=>{const{url:f}=await x(r);f&&xe(f)},x=async(r,p)=>{const f=new Promise((M,j)=>{J.get(`https://xiaoapi.cn/API/yy_sq.php?msg=${r.song}-${r.singer}&n=1`).then(u=>{u.data.code===200?M(u.data):j()})}),O=new Promise((M,j)=>{J.get(`https://api.lolimi.cn/API/kggc/api.php?msg=${r.song}-${r.singer}&n=1`).then(u=>{u.data.code===1?M(u.data.data):j()})}),S=await Promise.all([f,O]);return{...S[0],...S[1]}};return(r,p)=>{const f=g("a-input"),O=g("a-col"),S=g("a-button"),M=g("a-row"),j=g("a-empty"),u=g("a-menu-item"),h=g("a-menu"),D=g("a-dropdown"),G=g("perfect-scrollbar"),Z=g("a-spin");return v(),_("div",Rt,[l(M,{gutter:12},{default:d(()=>[l(O,{span:20},{default:d(()=>[l(f,{value:e.value,"onUpdate:value":p[0]||(p[0]=b=>e.value=b),onPressEnter:p[1]||(p[1]=b=>V(b.target.value)),placeholder:"输入歌曲、歌手",allowClear:"",style:{"border-radius":"16px"}},{prefix:d(()=>[l(c(ye))]),_:1},8,["value"])]),_:1}),l(O,{span:3},{default:d(()=>[l(S,{type:"primary",shape:"round",onClick:p[2]||(p[2]=b=>V(e.value))},{default:d(()=>[A("搜索")]),_:1})]),_:1})]),_:1}),c(t).searchHistory.length?(v(),_("div",At,[a("p",Nt,[A(" 搜索历史： "),a("span",{class:"clear",onClick:$},[l(c(Oe)),A("清空历史搜索")])]),a("div",Ht,[(v(!0),_(W,null,X(c(t).searchHistory,(b,L)=>(v(),_("p",{key:L,onClick:B=>o(b)},[a("span",Bt,z(b),1),l(c(Pe),{title:"点击移除",onClick:be(B=>y(b),["stop"])},null,8,["onClick"])],8,Tt))),128))])])):H("",!0),a("div",Ut,[qt,l(Z,{spinning:i.value,tip:"加载中..."},{default:d(()=>[l(G,{class:"scroll-bar",onPsScrollY:m},{default:d(()=>[s.value.length?H("",!0):(v(),T(j,{key:0})),a("ul",null,[(v(!0),_(W,null,X(s.value,(b,L)=>(v(),_("li",{key:L,onClick:B=>E(b,L)},[a("p",Yt,z(b.song)+" - "+z(b.singers),1),a("div",Jt,[l(D,{placement:"bottomLeft",arrow:""},{overlay:d(()=>[l(h,null,{default:d(()=>[l(u,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:B=>I(b,L)},"添加到播放列表",8,Qt)]),_:2},1024),l(u,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:B=>E(b,L)},"立即播放",8,Wt)]),_:2},1024),l(u,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:B=>C(b,L)},"下一首播放",8,Xt)]),_:2},1024),l(u,null,{default:d(()=>[a("a",{href:"javascript:;",onClick:B=>F(b,L)},"下载",8,Zt)]),_:2},1024)]),_:2},1024)]),default:d(()=>[l(c(Le))]),_:2},1024)])],8,Gt))),128))])]),_:1})]),_:1},8,["spinning"])])])}}},en=U(Kt,[["__scopeId","data-v-2f05ab74"]]);const tn=n=>($e("data-v-1e9c5fc9"),n=n(),Ce(),n),nn={class:"bg"},sn=["src"],ln=tn(()=>a("div",{class:"mask"},null,-1)),an={class:"music-info"},cn=["src"],on={class:"music-lyric"},rn={key:0,class:"no-lyric"},un={class:"action"},dn={__name:"MusicFullScreen",props:{open:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:t}){const{useMusicStore:e}=q(),s=P(!1),i=P(null),{isFullscreen:V,toggle:w,exit:k}=ke(i),o=P({});Q(()=>[e.activeIndex,e.settings.playing],()=>{o.value=e.musicList[e.activeIndex]},{immediate:!0,deep:!0});const m=Y(()=>{var C,F,x;let I=[];return(F=(C=o.value)==null?void 0:C.content)!=null&&F.length?I=y((x=o.value)==null?void 0:x.content):$(),I}),$=()=>{J.get(`https://api.lolimi.cn/API/kggc/api.php?msg=${o.value.name}-${o.value.singer}&n=1`).then(I=>{const{content:C}=I.data.data;I.data.code===1&&(e.musicList[e.activeIndex].content=C)})},y=I=>{const C=[];return I.split(`
`).map(x=>{let r=x.match(/\[(.*?)\]/);if(r){let p=r[1];/^(0\d|1\d|2[0-3]):([0-5]\d)\.(?:\d{2})$/.test(p)&&C.push({time:p,lyric:x.replace(/\[.*?\]/g,"")})}}),C},E=()=>{k(),t("close")};return(I,C)=>{const F=g("perfect-scrollbar");return v(),_("div",{ref_key:"fullscreenRef",ref:i,class:N(["music-fullscreen",{open:n.open}])},[a("div",nn,[a("img",{src:o.value.cover,alt:""},null,8,sn),ln]),a("div",an,[a("img",{class:N(["cover",{playing:s.value||c(e).settings.playing}]),onClick:C[0]||(C[0]=x=>s.value=!s.value),src:o.value.cover,alt:""},null,10,cn),a("p",null,z(o.value.name),1),a("span",null,z(o.value.singer),1)]),a("div",on,[m.value.length?H("",!0):(v(),_("p",rn,"暂无歌词")),l(F,{class:"scroll-bar"},{default:d(()=>[(v(!0),_(W,null,X(m.value,(x,r)=>(v(),_("p",{class:N({active:r===6}),key:r},z(x.lyric),3))),128))]),_:1})]),a("div",un,[l(c(Ie),{class:"close",title:"关闭歌词",onClick:E}),c(V)?(v(),T(c(Ee),{key:0,title:"关闭全屏",onClick:c(w)},null,8,["onClick"])):(v(),T(c(He),{key:1,title:"开启全屏",onClick:c(w)},null,8,["onClick"]))])],2)}}},vn=U(dn,[["__scopeId","data-v-1e9c5fc9"]]);const pn={class:"music"},fn=["title"],mn={__name:"Index",setup(n){const{useMusicStore:t}=q();Me(()=>{t.settings.playing=!1});const e=()=>{t.toggleVisible()},s=P(!1);Q(()=>t.visible,k=>{},{immediate:!0});const i=P(!1),V=()=>{i.value=!0},w=P(!1);return(k,o)=>{const m=g("IDialog");return v(),_("div",pn,[a("div",{class:N(["toggle-icon bf",[c(t).visible?"down":"up"]]),title:c(t).visible?"关闭播放器":"打开播放器",onClick:e},[l(c(je))],10,fn),a("div",{class:N(["music-ctrl bf",[c(t).visible?"show":""]])},[l(Ct,{onShowSearch:V,onToggleMusicList:o[0]||(o[0]=$=>s.value=!s.value),onShowLyric:o[1]||(o[1]=$=>w.value=!0)})],2),l(Dt,{open:s.value,onShowSearch:V,onClose:o[2]||(o[2]=$=>s.value=!1)},null,8,["open"]),l(m,{title:"搜索音乐",visible:i.value,zIndex:1002,onOk:o[3]||(o[3]=$=>i.value=!1),onCancel:o[4]||(o[4]=$=>i.value=!1)},{default:d(()=>[l(en)]),_:1},8,["visible"]),l(vn,{open:w.value,onClose:o[5]||(o[5]=$=>w.value=!1)},null,8,["open"])])}}},hn=U(mn,[["__scopeId","data-v-d2395d68"]]);export{hn as default};
