import{q as C,E as S,a as o,w as x,f as l,h as c,i as w,s as u,D as B,B as y,j as s,k as d,F as E,t as N,C as U,z as H,M as j,N as q}from"./index-a3155e83.js";import{_ as O,u as z,c as A}from"./App-1413da40.js";const F=i=>(j("data-v-e257cdd4"),i=i(),q(),i),$={class:"offwork-text"},L={key:0},M=F(()=>u("img",{src:"https://i.postimg.cc/pVzqwjn0/qipao.png",alt:""},null,-1)),R={__name:"OffWorkCountdown",setup(i){const{useAppStore:t}=z(),k=C(!1),W=S(["周日","周一","周二","周三","周四","周五","周六"]),a=S({workDays:t.offWorkCountdown.workDays,workTimeStart:t.offWorkCountdown.workTimeStart?o(t.offWorkCountdown.workTimeStart,"HH:mm"):null,workTimeEnd:t.offWorkCountdown.workTimeEnd?o(t.offWorkCountdown.workTimeEnd,"HH:mm"):null}),m=C("");let p=null;const g=()=>{p&&clearInterval(p)};return x(()=>a,r=>{let e="点击配置";g(),r.workTimeEnd?(t.offWorkCountdown.workTimeStart=o(r.workTimeStart).format("HH:mm"),t.offWorkCountdown.workTimeEnd=o(r.workTimeEnd).format("HH:mm"),t.offWorkCountdown.workDays[o().day()]?o().isBefore(o(r.workTimeStart))?e="还没上班呢~":o().isAfter(o(r.workTimeEnd))?e="已经下班啦~":p=setInterval(()=>{const _=o(r.workTimeEnd),f=o();e=_.diff(f),m.value=A(e)},1e3):e="今天是休息日~"):t.offWorkCountdown.workTimeEnd=null,r.workTimeStart||(t.offWorkCountdown.workTimeStart=null),m.value=e},{immediate:!0,deep:!0}),(r,e)=>{const _=l("a-checkable-tag"),f=l("a-form-item"),v=l("a-time-picker"),h=l("a-space"),D=l("a-form"),I=l("IDialog");return c(),w(E,null,[u("div",{class:"offwork",onClick:e[0]||(e[0]=n=>k.value=!0)},[u("div",$,[m.value.includes(":")?(c(),w("p",L,"距离下班时间还有")):B("",!0),u("p",null,y(m.value),1)]),M]),s(I,{title:"配置",width:480,visible:k.value,onCancel:e[3]||(e[3]=n=>k.value=!1)},{default:d(()=>[s(D,{model:a,layout:"vertical",style:{"padding-top":"20px"}},{default:d(()=>[s(f,{label:"选择工作日"},{default:d(()=>[(c(!0),w(E,null,N(W,(n,T)=>(c(),U(_,{key:n,checked:a.workDays[T],"onUpdate:checked":b=>a.workDays[T]=b},{default:d(()=>[H(y(n),1)]),_:2},1032,["checked","onUpdate:checked"]))),128))]),_:1}),s(f,{label:"上下班时间"},{default:d(()=>[s(h,null,{default:d(()=>[s(v,{value:a.workTimeStart,"onUpdate:value":e[1]||(e[1]=n=>a.workTimeStart=n),placeholder:"上班时间","minute-step":10,format:"HH:mm"},null,8,["value"]),H("~ "),s(v,{value:a.workTimeEnd,"onUpdate:value":e[2]||(e[2]=n=>a.workTimeEnd=n),placeholder:"下班时间","minute-step":10,format:"HH:mm"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},K=O(R,[["__scopeId","data-v-e257cdd4"]]);export{K as default};
