import{u as M}from"./Index-334328c5.js";import{h as e,w as f,by as T,x as _,r as N,o as R,j as X,i as Y,a as m,d as k,D as $,aJ as E,c as O,l as V,b0 as j}from"./index-277de8d2.js";const J={__name:"IDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"标题"},width:{type:[String,Number],default:520}},emits:["ok","cancel"],setup(n,{emit:p}){const x=n,s=e(!1);f(()=>x.visible,t=>{t&&(s.value=!0)});const r=e(null),{x:u,y:i,isDragging:h}=M(r),B=t=>{p("ok")},C=()=>{p("cancel")},g=e(0),y=e(0),o=e(!1),c=e(0),v=e(0),w=e(0),b=e(0),a=e({left:0,right:0,top:0,bottom:0});f([u,i],()=>{if(!o.value){g.value=u.value,y.value=i.value;const t=document.body.getBoundingClientRect(),l=r.value.getBoundingClientRect();a.value.right=t.width-l.width,a.value.bottom=t.height-l.height,w.value=c.value,b.value=v.value}o.value=!0}),f(h,()=>{h||(o.value=!1)}),T(()=>{o.value&&(c.value=w.value+Math.min(Math.max(a.value.left,u.value),a.value.right)-g.value,v.value=b.value+Math.min(Math.max(a.value.top,i.value),a.value.bottom)-y.value)});const D=_(()=>({transform:`translate(${c.value}px, ${v.value}px)`}));return(t,l)=>{const S=N("a-modal");return R(),X("div",null,[Y(S,{ref:"modalRef",class:"i-dialog",open:s.value,"onUpdate:open":l[0]||(l[0]=d=>s.value=d),width:n.width,"wrap-style":{overflow:"hidden"},footer:null,onOk:B,onCancel:C},{title:m(()=>[k("div",{ref_key:"modalTitleRef",ref:r,style:{width:"100%",cursor:"move"}},$(n.title),513)]),modalRender:m(({originVNode:d})=>[k("div",{style:E(D.value)},[(R(),O(V(d)))],4)]),default:m(()=>[j(t.$slots,"default")]),_:3},8,["open","width"])])}}};export{J as default};
