import{_ as y,u as C,s as I,a as p,o as s,b as l,f as n,F as m,j as k,t as c,e as d,h as _,d as v,R as S,Q as $,c as B,g as V,i as Y,l as j,T as D,U as H}from"./index-a3764c1d.js";const O={class:"news"},E={class:"news-box"},L={class:"news-title"},M=["title"],R={key:2},z=["href","title"],A={__name:"Index",setup(P){const{useNewsStore:x}=C(),b=I(()=>x.lists.filter(t=>t.visible)),g=(t,a)=>{const u=`https://api.lolimi.cn/API/jhrb/?hot=${t.value}`;t.isFetching=!0,j.get(u).then(h=>{const{data:f,code:e,updateTime:i}=h.data;e===200&&(t.data=f.sort((o,r)=>r.hot-o.hot),t.updateTime=F(i),a&&D({content:`${t.label}拉取成功！`})),t.isFetching=!1}).catch(()=>{t.isFetching=!1})};b.value.forEach(t=>{g(t,!1)});const F=t=>H(t).format("YYYY-MM-DD HH:mm:ss"),N=t=>{if(t){let a=t.toString();return a.indexOf("万")>=0||Number(a)<1e4?a:(Number(a)/1e4).toFixed(1)+"万"}};return(t,a)=>{const u=p("a-spin"),h=p("a-empty"),f=p("perfect-scrollbar");return s(),l("div",O,[n("div",E,[(s(!0),l(m,null,k(b.value,e=>(s(),l("div",{class:"news-item bf",key:e.key},[n("div",L,[n("p",null,c(e.label),1),n("p",{title:`更新时间${e.updateTime}`},[d(c(e.updateTime),1),e.isFetching?(s(),_(v($),{key:1,title:"拉取中..."})):(s(),_(v(S),{key:0,title:`拉取最新${e.label}`,onClick:i=>g(e,!0)},null,8,["title","onClick"]))],8,M)]),B(f,{class:"scroll-bar"},{default:V(()=>{var i;return[e.isFetching?(s(),_(u,{key:0,tip:"加载中...",size:"large"})):!e.isFetching&&!((i=e.data)!=null&&i.length)?(s(),_(h,{key:1,description:"暂无数据"})):(s(),l("div",R,[(s(!0),l(m,null,k(e.data,(o,r)=>(s(),l("a",{class:"news-info",key:r,href:o.url,title:o.title,target:"_blank"},[n("span",null,[d(c(r+1)+".",1),e.value==="历史上的今天"?(s(),l(m,{key:0},[d("【"+c(o.year)+"年】",1)],64)):Y("",!0),d(c(o.title),1)]),n("span",null,c(N(o.hot)),1)],8,z))),128))]))]}),_:2},1024)]))),128))])])}}},U=y(A,[["__scopeId","data-v-608d91b7"]]);export{U as default};
