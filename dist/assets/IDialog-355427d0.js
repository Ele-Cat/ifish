import{u as S}from"./Index-cc28f6f7.js";import{h as e,w as d,bx as M,x as T,r as $,o as b,j as I,i as X,a as f,d as w,D as Y,aI as E,c as N,l as O,a$ as V}from"./index-c1caf2ce.js";const U={__name:"IDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"标题"}},emits:["ok","cancel"],setup(m,{emit:p}){const R=m,n=e(!1);d(()=>R.visible,t=>{t&&(n.value=!0)});const s=e(null),{x:r,y:u,isDragging:g}=S(s),k=t=>{p("ok")},D=()=>{p("cancel")},h=e(0),y=e(0),o=e(!1),i=e(0),c=e(0),_=e(0),x=e(0),a=e({left:0,right:0,top:0,bottom:0});d([r,u],()=>{if(!o.value){h.value=r.value,y.value=u.value;const t=document.body.getBoundingClientRect(),l=s.value.getBoundingClientRect();a.value.right=t.width-l.width,a.value.bottom=t.height-l.height,_.value=i.value,x.value=c.value}o.value=!0}),d(g,()=>{g||(o.value=!1)}),M(()=>{o.value&&(i.value=_.value+Math.min(Math.max(a.value.left,r.value),a.value.right)-h.value,c.value=x.value+Math.min(Math.max(a.value.top,u.value),a.value.bottom)-y.value)});const B=T(()=>({transform:`translate(${i.value}px, ${c.value}px)`}));return(t,l)=>{const C=$("a-modal");return b(),I("div",null,[X(C,{ref:"modalRef",open:n.value,"onUpdate:open":l[0]||(l[0]=v=>n.value=v),"wrap-style":{overflow:"hidden"},footer:null,onOk:k,onCancel:D},{title:f(()=>[w("div",{ref_key:"modalTitleRef",ref:s,style:{width:"100%",cursor:"move"}},Y(m.title),513)]),modalRender:f(({originVNode:v})=>[w("div",{style:E(B.value)},[(b(),N(O(v)))],4)]),default:f(()=>[V(t.$slots,"default")]),_:3},8,["open"])])}}};export{U as default};
