import{e as E,f as U,q as k,w as P,r as p,h as a,i as c,s as i,u as s,z as A,y as j,B as y,j as l,k as r,C as $,D as _,F as q,M as H,N as G}from"./index-e95b7bf3.js";import{_ as J,u as K,s as M}from"./App-3eb9830f.js";import{V as Q,P as W,a as X,b as Y,M as Z}from"./VerticalRightOutlined-e38d4a1d.js";const ee=o=>(H("data-v-6a3fd6a6"),o=o(),G(),o),se={class:"music-box"},te={key:0,class:"info"},ie={key:1,class:"info"},le=["src"],ne={class:"name"},oe=ee(()=>i("span",{class:"line"}," - ",-1)),ae={class:"singer"},ue={class:"center"},ce={class:"prev-next"},de={class:"progress-box"},re={class:"ctrl"},ve=["title"],me={class:"mode"},fe={__name:"MusicCtrl",props:{musicCurrentTime:{type:Number,default:0},musicDuration:{type:Number,default:0},prevMusic:{type:String,default:""},nextMusic:{type:String,default:""},musicMode:{type:String,default:""}},emits:["toggleMusicList","showSearch","handleDurationChange","handlePlay","handlePause","handlePrev","handleNext","showLyric"],setup(o,{emit:d}){const L=o,{useMusicStore:t}=K(),w=E(()=>U(()=>import("./MusicShortkey-a5f1d8b7.js"),["assets/MusicShortkey-a5f1d8b7.js","assets/App-3eb9830f.js","assets/index-e95b7bf3.js","assets/index-c3c2086a.css","assets/App-e46b25bc.css","assets/MusicShortkey-f726251f.css"])),m=k(0);P(()=>L.musicCurrentTime,u=>{m.value=u},{immediate:!0,deep:!0});const D=()=>{d("toggleMusicList")},I=()=>{d("showSearch")},C=u=>{t.changeMode(u)},f=u=>{t.toggleMute(u)},g=k({});P(()=>[t.activeIndex,t.settings.playing],()=>{g.value=t.musicList[t.activeIndex]||{}},{immediate:!0,deep:!0});const N=u=>M(u),b=u=>{d("handleDurationChange",u)},T=()=>{d("handlePlay")},V=()=>{d("handlePause")},O=()=>{d("handlePrev")},B=()=>{d("handleNext")},x=()=>{d("showLyric")},h=k(!1),F=()=>{h.value=!0};return(u,e)=>{const v=p("a-tooltip"),S=p("a-slider"),R=p("a-divider"),z=p("IDialog");return a(),c(q,null,[i("div",se,[s(t).musicList.length?(a(),c("div",ie,[i("div",{class:"cover",onClick:x},[i("img",{class:j({playing:s(t).settings.playing}),src:g.value.cover,onerror:"this.src='./images/music.png'",alt:""},null,10,le)]),i("div",null,[i("span",ne,y(g.value.name),1),oe,i("span",ae,y(g.value.singer),1)])])):(a(),c("div",te,[A(" 暂无音乐，请选择"),i("span",{class:"add",onClick:I},"添加")])),i("div",ue,[i("div",ce,[l(v,{title:"查看快捷键"},{default:r(()=>[i("i",{class:"ifishfont ifish-music-shortkey",onClick:e[0]||(e[0]=n=>F())})]),_:1}),l(v,{title:`上一首${o.prevMusic?"：":""}${o.prevMusic}`},{default:r(()=>[l(s(Q),{onClick:O})]),_:1},8,["title"]),l(v,{title:s(t).settings.playing?"点击暂停":"点击播放"},{default:r(()=>[s(t).settings.playing?(a(),$(s(X),{key:1,class:"pause",onClick:V})):(a(),$(s(W),{key:0,class:"play",onClick:T}))]),_:1},8,["title"]),l(v,{title:`下一首${o.nextMusic?"：":""}${o.nextMusic}`},{default:r(()=>[l(s(Y),{onClick:B})]),_:1},8,["title"]),l(v,{title:"展开歌词"},{default:r(()=>[i("i",{class:"ifishfont ifish-music-lyric",onClick:x})]),_:1})]),i("div",de,[i("p",null,y(s(M)(m.value)),1),l(S,{class:"play-slider",min:0,max:o.musicDuration,onChange:b,value:m.value,"onUpdate:value":e[1]||(e[1]=n=>m.value=n),tipFormatter:N},null,8,["max","value"]),i("p",null,y(s(M)(o.musicDuration)),1)])]),i("div",re,[i("div",{class:"volume",title:`当前音量：${s(t).settings.volume}`},[s(t).settings.mute||s(t).settings.volume===0?(a(),c("i",{key:0,class:"ifishfont ifish-volumeDisable",onClick:e[2]||(e[2]=n=>f(!0))})):s(t).settings.volume>=0&&s(t).settings.volume<30?(a(),c("i",{key:1,class:"ifishfont ifish-volumeLow",onClick:e[3]||(e[3]=n=>f(!1))})):s(t).settings.volume>=30&&s(t).settings.volume<60?(a(),c("i",{key:2,class:"ifishfont ifish-volumeMiddle",onClick:e[4]||(e[4]=n=>f(!1))})):(a(),c("i",{key:3,class:"ifishfont ifish-volumeHigh",onClick:e[5]||(e[5]=n=>f(!1))})),l(S,{class:"volume-slider",min:0,max:100,value:s(t).settings.volume,"onUpdate:value":e[6]||(e[6]=n=>s(t).settings.volume=n)},null,8,["value"])],8,ve),i("div",me,[l(v,{title:o.musicMode},{default:r(()=>[s(t).settings.mode==="listCycle"?(a(),c("i",{key:0,class:"ifishfont ifish-musicListLoop",title:"列表循环",onClick:e[7]||(e[7]=n=>C("singleCycle"))})):_("",!0),s(t).settings.mode==="singleCycle"?(a(),c("i",{key:1,class:"ifishfont ifish-musicSingleCycle",title:"单曲循环",onClick:e[8]||(e[8]=n=>C("randomPlay"))})):_("",!0),s(t).settings.mode==="randomPlay"?(a(),c("i",{key:2,class:"ifishfont ifish-musicRandomPlay",title:"随机播放",onClick:e[9]||(e[9]=n=>C("listCycle"))})):_("",!0)]),_:1},8,["title"])]),l(R,{type:"vertical"}),l(v,{title:"播放列表",placement:"topRight"},{default:r(()=>[l(s(Z),{onClick:D})]),_:1})])]),l(z,{title:"音乐快捷键",visible:h.value,zIndex:1003,onOk:e[10]||(e[10]=n=>h.value=!1),onCancel:e[11]||(e[11]=n=>h.value=!1)},{default:r(()=>[l(s(w))]),_:1},8,["visible"])],64)}}},ye=J(fe,[["__scopeId","data-v-6a3fd6a6"]]);export{ye as default};
