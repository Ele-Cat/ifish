import{_ as B,u as C,e as V,a as b,t as $}from"./App-f565ec1d.js";import{J as D,f as h,h as s,i as a,s as o,F as p,t as x,a as I,B as l,z as i,C as r,u as y,R as Y,O,j as S,k as j,D as z}from"./index-fc2787d6.js";const E={class:"news"},H={class:"news-box"},L={class:"news-title"},M=["title"],R={key:2},J=["href","title"],q={__name:"Index",setup(A){const{useNewsStore:F}=C();V.on("resetNews",()=>{k()}),b.get("https://dailyhot-api.ahfi.cn/zhihu/").then(t=>{console.log("res: ",t)}).catch(()=>{item.isFetching=!1});const f=D(()=>F.lists.filter(t=>t.visible)),m=(t,g)=>{const d=`https://api.moyuduck.com/hot/top?type=${t.value}`;t.isFetching=!0,t.data=[],b.get(d).then(_=>{const{data:c,code:e}=_.data;e===200&&(t.data=c.hotTops,t.updateTime=N(c.time),g&&$({content:`${t.label}拉取成功！`})),t.isFetching=!1}).catch(()=>{t.isFetching=!1})},k=()=>{f.value.forEach(t=>{m(t,!1)})};k();const N=t=>I(t).format("YYYY-MM-DD HH:mm:ss");return(t,g)=>{const d=h("a-spin"),_=h("a-empty"),c=h("perfect-scrollbar");return s(),a("div",E,[o("div",H,[(s(!0),a(p,null,x(f.value,e=>(s(),a("div",{class:"news-item bf",key:e.key},[o("div",L,[o("p",null,l(e.label),1),o("p",{title:`更新时间${e.updateTime}`},[i(l(e.updateTime),1),e.isFetching?(s(),r(y(O),{key:1,title:"拉取中..."})):(s(),r(y(Y),{key:0,title:`拉取最新${e.label}`,onClick:u=>m(e,!0)},null,8,["title","onClick"]))],8,M)]),S(c,{class:"scroll-bar"},{default:j(()=>{var u;return[e.isFetching?(s(),r(d,{key:0,tip:"加载中..."})):!e.isFetching&&!((u=e.data)!=null&&u.length)?(s(),r(_,{key:1,description:"暂无数据"})):(s(),a("div",R,[(s(!0),a(p,null,x(e.data,(n,v)=>(s(),a("a",{class:"news-info",key:v,href:n.url,title:n.title,target:"_blank"},[o("span",null,[i(l(v+1)+".",1),e.value==="历史上的今天"?(s(),a(p,{key:0},[i("【"+l(n.year)+"年】",1)],64)):z("",!0),i(l(n.title),1)]),o("span",null,l(n.hotValue),1)],8,J))),128))]))]}),_:2},1024)]))),128))])])}}},P=B(q,[["__scopeId","data-v-53425de7"]]);export{P as default};
