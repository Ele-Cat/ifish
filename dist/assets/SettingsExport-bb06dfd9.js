import{bO as _,bP as L,_ as k,u as T,r as B,a as S,o as F,b as M,c as p,g as d,f as b,e as w,bS as j,bW as C,p as U,m as H}from"./index-5519999e.js";var A={exports:{}};(function(u,m){(function(i,c){c()})(_,function(){function i(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function c(e,t,a){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){n(o.response,t,a)},o.onerror=function(){console.error("could not download file")},o.send()}function y(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function f(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _=="object"&&_.global===_?_:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,a){var o=s.URL||s.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin===location.origin?f(r):y(r.href)?c(e,t,a):f(r,r.target="_blank")):(r.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(r.href)},4e4),setTimeout(function(){f(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(i(e,a),t);else if(y(e))c(e,t,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){f(o)})}}:function(e,t,a,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return c(e,t,a);var r=e.type==="application/octet-stream",R=/constructor/i.test(s.HTMLElement)||s.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||r&&R||l)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=h?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=v:location=v,o=null},g.readAsDataURL(e)}else{var E=s.URL||s.webkitURL,x=E.createObjectURL(e);o?o.location=x:location.href=x,o=null,setTimeout(function(){E.revokeObjectURL(x)},4e4)}});s.saveAs=n.saveAs=n,u.exports=n})})(A);var D=A.exports;const N=L(D);const O=u=>(U("data-v-23f6cdc7"),u=u(),H(),u),I={class:"settings-export"},$={class:"label",for:"json"},Y=O(()=>b("br",null,null,-1)),J=O(()=>b("br",null,null,-1)),V={__name:"SettingsExport",setup(u){const{useSystemStore:m,useAppStore:i}=T(),c=B({}),y={style:{width:"68px"}},f=l=>{const n=l.target.files[0];if(!n.name.includes("json")){j({type:"warning",content:"只能插入json文件"});return}const e=new FileReader;e.readAsText(n),e.onload=t=>{console.log("res: ",t);const{type:a,data:o}=JSON.parse(t.target.result);!a||!["app","system","all"].includes(a)||!o?j({type:"warning",content:"JSON文件中的格式有问题，请检查后重试"}):(console.log(a,o),a==="app"?i.lists=o:a==="system"?m.settings=o:a==="all"&&(i.lists=o.app,m.settings=o.system),j({content:"导入成功！"}),window.location.reload()),l.target.value=null}},s=l=>{let n={};const e={app:"首页App",system:"系统配置",all:"全部配置"};l==="app"?n={type:l,data:i.lists}:l==="system"?n={type:l,data:m.settings}:l==="all"&&(n={type:l,data:{app:i.lists,system:m.settings}});const t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});N.saveAs(t,`${e[l]} - ${C().format("YYYYMMDDHHmmss")}.json`)};return(l,n)=>{const e=S("a-button"),t=S("a-form-item"),a=S("a-form");return F(),M("div",I,[p(a,{model:c.value,"label-col":y},{default:d(()=>[p(t,{label:"导入"},{default:d(()=>[p(e,{type:"primary"},{default:d(()=>[b("label",$,[w(" 导入配置 "),b("input",{id:"json",type:"file",accept:".json",hidden:"",onChange:f},null,32)])]),_:1})]),_:1}),p(t,{label:"导出"},{default:d(()=>[p(e,{type:"primary",onClick:n[0]||(n[0]=o=>s("app")),style:{"margin-bottom":"12px"}},{default:d(()=>[w("导出首页App配置")]),_:1}),Y,p(e,{type:"primary",onClick:n[1]||(n[1]=o=>s("system")),style:{"margin-bottom":"12px"}},{default:d(()=>[w("导出系统配置")]),_:1}),J,p(e,{type:"primary",onClick:n[2]||(n[2]=o=>s("all"))},{default:d(()=>[w("导出全部配置")]),_:1})]),_:1})]),_:1},8,["model"])])}}},G=k(V,[["__scopeId","data-v-23f6cdc7"]]);export{G as default};
