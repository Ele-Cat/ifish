import{_ as N,u as B,e as C,a as V,t as $}from"./App-bc402b5b.js";import{J as D,f as p,h as s,i as a,s as o,F as f,t as b,a as I,B as l,z as i,C as r,u as x,R as Y,O,j as S,k as j,D as E}from"./index-a4fdd975.js";const H={class:"news"},L={class:"news-box"},M={class:"news-title"},R=["title"],z={key:2},J=["href","title"],q={__name:"Index",setup(A){const{useNewsStore:y}=B();C.on("resetNews",()=>{k()});const h=D(()=>y.lists.filter(t=>t.visible)),m=(t,v)=>{const _=`https://api.moyuduck.com/hot/top?type=${t.value}`;t.isFetching=!0,t.data=[],V.get(_).then(u=>{const{data:c,code:e}=u.data;e===200&&(t.data=c.hotTops,t.updateTime=F(c.time),v&&$({content:`${t.label}拉取成功！`})),t.isFetching=!1}).catch(()=>{t.isFetching=!1})},k=()=>{h.value.forEach(t=>{m(t,!1)})};k();const F=t=>I(t).format("YYYY-MM-DD HH:mm:ss");return(t,v)=>{const _=p("a-spin"),u=p("a-empty"),c=p("perfect-scrollbar");return s(),a("div",H,[o("div",L,[(s(!0),a(f,null,b(h.value,e=>(s(),a("div",{class:"news-item bf",key:e.key},[o("div",M,[o("p",null,l(e.label),1),o("p",{title:`更新时间${e.updateTime}`},[i(l(e.updateTime),1),e.isFetching?(s(),r(x(O),{key:1,title:"拉取中..."})):(s(),r(x(Y),{key:0,title:`拉取最新${e.label}`,onClick:d=>m(e,!0)},null,8,["title","onClick"]))],8,R)]),S(c,{class:"scroll-bar"},{default:j(()=>{var d;return[e.isFetching?(s(),r(_,{key:0,tip:"加载中..."})):!e.isFetching&&!((d=e.data)!=null&&d.length)?(s(),r(u,{key:1,description:"暂无数据"})):(s(),a("div",z,[(s(!0),a(f,null,b(e.data,(n,g)=>(s(),a("a",{class:"news-info",key:g,href:n.url,title:n.title,target:"_blank"},[o("span",null,[i(l(g+1)+".",1),e.value==="历史上的今天"?(s(),a(f,{key:0},[i("【"+l(n.year)+"年】",1)],64)):E("",!0),i(l(n.title),1)]),o("span",null,l(n.hotValue),1)],8,J))),128))]))]}),_:2},1024)]))),128))])])}}},P=N(q,[["__scopeId","data-v-874f3658"]]);export{P as default};
