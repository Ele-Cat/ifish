import{_ as F,u as C,a as N,t as B}from"./App-45e32b5c.js";import{J as V,f as p,h as a,i as s,s as o,F as f,t as g,a as $,B as l,z as i,C as r,u as b,R as D,O as I,j as Y,k as O,D as S}from"./index-f2af9d8e.js";const j={class:"news"},E={class:"news-box"},H={class:"news-title"},L=["title"],M={key:2},R=["href","title"],z={__name:"Index",setup(J){const{useNewsStore:x}=C(),h=V(()=>x.lists.filter(t=>t.visible)),m=(t,k)=>{const _=`https://api.moyuduck.com/hot/top?type=${t.value}`;t.isFetching=!0,t.data=[],N.get(_).then(d=>{const{data:n,code:e}=d.data;e===200&&(t.data=n.hotTops,t.updateTime=y(n.time),k&&B({content:`${t.label}拉取成功！`})),t.isFetching=!1}).catch(()=>{t.isFetching=!1})};h.value.forEach(t=>{m(t,!1)});const y=t=>$(t).format("YYYY-MM-DD HH:mm:ss");return(t,k)=>{const _=p("a-spin"),d=p("a-empty"),n=p("perfect-scrollbar");return a(),s("div",j,[o("div",E,[(a(!0),s(f,null,g(h.value,e=>(a(),s("div",{class:"news-item bf",key:e.key},[o("div",H,[o("p",null,l(e.label),1),o("p",{title:`更新时间${e.updateTime}`},[i(l(e.updateTime),1),e.isFetching?(a(),r(b(I),{key:1,title:"拉取中..."})):(a(),r(b(D),{key:0,title:`拉取最新${e.label}`,onClick:u=>m(e,!0)},null,8,["title","onClick"]))],8,L)]),Y(n,{class:"scroll-bar"},{default:O(()=>{var u;return[e.isFetching?(a(),r(_,{key:0,tip:"加载中..."})):!e.isFetching&&!((u=e.data)!=null&&u.length)?(a(),r(d,{key:1,description:"暂无数据"})):(a(),s("div",M,[(a(!0),s(f,null,g(e.data,(c,v)=>(a(),s("a",{class:"news-info",key:v,href:c.url,title:c.title,target:"_blank"},[o("span",null,[i(l(v+1)+".",1),e.value==="历史上的今天"?(a(),s(f,{key:0},[i("【"+l(c.year)+"年】",1)],64)):S("",!0),i(l(c.title),1)]),o("span",null,l(c.hotValue),1)],8,R))),128))]))]}),_:2},1024)]))),128))])])}}},G=F(z,[["__scopeId","data-v-9d5f0711"]]);export{G as default};
