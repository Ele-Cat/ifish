import{j as A,A as B,q as b,w as x,p as z,v as R,u as p,h as i,i as u,s as T,F as g,t as m,x as j,y as _,l as w,z as D,B as y,C as L,D as h}from"./index-e95b7bf3.js";import{_ as N,u as P,e as f}from"./App-3eb9830f.js";import{a as M}from"./enums-cf458477.js";var V={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const $=V;function S(r){for(var e=1;e<arguments.length;e++){var l=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(l).filter(function(o){return Object.getOwnPropertyDescriptor(l,o).enumerable}))),n.forEach(function(o){E(r,o,l[o])})}return r}function E(r,e,l){return e in r?Object.defineProperty(r,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[e]=l,r}var v=function(e,l){var n=S({},e,l.attrs);return A(B,S({},n,{icon:$}),null)};v.displayName="CaretRightOutlined";v.inheritAttrs=!1;const I=v;const F=["onClick"],q={key:1,class:"layout-box bf"},W=["onClick"],G={__name:"ContextMenu",setup(r){const{useContextMenuStore:e,useSystemStore:l,useAppStore:n}=P(),o=b(null),C=t=>{const{id:a}=e.activeApp;t==="addApps"?f.emit("addApps",{type:"add"}):t==="edit"?f.emit("addApps",{type:"edit",app:e.activeApp}):t==="randomBg"?l.randomWallpaper():t==="bgSettings"?f.emit("openBgSettings"):t==="settings"?f.emit("openSettings"):t==="delete"&&n.lists.splice(n.lists.findIndex(s=>s.id==a),1),e.activeApp={},e.menuVisible=!1},O=t=>{const a=e.activeApp;return a&&a.gridSize?(a==null?void 0:a.gridSize[0])===(t==null?void 0:t.value[0])&&(a==null?void 0:a.gridSize[1])===(t==null?void 0:t.value[1]):!1},k=t=>{n.lists.map(a=>{a.id===e.activeApp.id&&(a.gridSize=t.value)}),e.menuVisible=!1},d=b([]);return x(()=>e.activeApp,t=>{t&&(t.type==="page"?l.activeMenu==="home"?d.value=[{label:"添加导航",value:"addApps"},{label:"随机壁纸",value:"randomBg"},{label:"壁纸设置",value:"bgSettings"},{label:"打开设置",value:"settings",borderTop:!0}]:d.value=[{label:"随机壁纸",value:"randomBg"},{label:"壁纸设置",value:"bgSettings"},{label:"打开设置",value:"settings",borderTop:!0}]:t.type==="bookmark"?d.value=[{label:"布局",value:"layout"},{label:"修改",value:"edit"},{label:"删除",value:"delete",borderTop:!0}]:t.type==="component"&&(d.value=[{label:"布局",value:"layout"},{label:"删除",value:"delete",borderTop:!0}]))}),(t,a)=>z((i(),u("div",{ref_key:"contextMenuRef",ref:o,class:"custom-menu bf",style:j(p(e).position),onContextmenu:a[0]||(a[0]=s=>s.preventDefault())},[T("ul",null,[(i(!0),u(g,null,m(d.value,s=>(i(),u("li",{key:s.value,class:_({"border-top":s.borderTop,red:s.value==="delete","layout-li":s.value==="layout"}),onClick:w(c=>C(s.value),["stop"])},[D(y(s.label),1),s.value==="layout"?(i(),L(p(I),{key:0,class:"caret-right"})):h("",!0),s.value==="layout"?(i(),u("ul",q,[(i(!0),u(g,null,m(p(M),c=>(i(),u("li",{onClick:H=>k(c),class:_({active:O(c)}),key:c.label},y(c.label),11,W))),128))])):h("",!0)],10,F))),128))])],36)),[[R,p(e).menuVisible]])}},X=N(G,[["__scopeId","data-v-88fadb51"]]);export{X as default};
