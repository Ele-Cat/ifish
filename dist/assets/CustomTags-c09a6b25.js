import{b as C,e as T,E as w,w as z,q as I,f as u,h as S,i as U,j as o,k as l,u as i,z as v}from"./index-3bfaf213.js";import{_ as R,u as E,b as P,t as j}from"./App-345859af.js";const q={class:"system-tags"},Z={__name:"CustomTags",props:{editType:{type:String,default:"add"},activeApp:{type:Object,default:()=>{}}},setup(g){const n=g,{useAppStore:p}=E(),y=C(()=>T(()=>import("./ImageEditor-46488900.js"),["assets/ImageEditor-46488900.js","assets/index-3bfaf213.js","assets/index-8733d98e.css","assets/App-345859af.js","assets/App-e46b25bc.css","assets/ImageEditor-9b2e870f.css"]));let e=w({id:"",url:"",title:"",description:"",icon:""});z(()=>[n.editType,n.activeApp],()=>{if(n.editType==="edit"){const{id:a,url:t,title:s,description:r,icon:m}=n.activeApp;e={...e,id:a,url:t,title:s,description:r,icon:m}}},{immediate:!0,deep:!0});const c=I(),b={style:{width:"80px"}},h={url:[{required:!0,validator:async(a,t)=>t?/^(http|https):\/\/([a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]\.)+[a-zA-Z]{2,}(\/\S*)?$/.test(t)?Promise.resolve():Promise.reject("请输入正确网站地址"):Promise.reject("请输入网站地址"),trigger:["change","blur"]}],title:[{required:!0,message:"请输入网站名称",trigger:["change","blur"]}],icon:[{required:!0,message:"请上传网站图标",trigger:["change","blur"]}]},x=a=>{e.icon=a,c.value.validateFields(["icon"])},k=()=>{c.value.validate().then(()=>{if(n.editType==="edit"){const a=p.lists.findIndex(t=>t.id===e.id);p.lists.splice(a,1,{id:e.id,type:"bookmark",title:e.title,url:e.url,icon:e.icon,description:e.description,gridSize:[1,1]})}else p.lists.push({id:P(21),type:"bookmark",title:e.title,url:e.url,icon:e.icon,description:e.description,gridSize:[1,1]}),_();j({content:n.editType==="edit"?"编辑成功":"添加成功"})}).catch(a=>{console.log("error",a)})},_=()=>{c.value.resetFields()};return(a,t)=>{const s=u("a-input"),r=u("a-form-item"),m=u("a-textarea"),f=u("a-button"),A=u("a-form");return S(),U("div",q,[o(A,{ref_key:"formRef",ref:c,model:i(e),rules:h,"label-col":b},{default:l(()=>[o(r,{label:"网站地址",name:"url"},{default:l(()=>[o(s,{value:i(e).url,"onUpdate:value":t[0]||(t[0]=d=>i(e).url=d),placeholder:"请输入网站地址"},null,8,["value"])]),_:1}),o(r,{label:"网站名称",name:"title"},{default:l(()=>[o(s,{value:i(e).title,"onUpdate:value":t[1]||(t[1]=d=>i(e).title=d),placeholder:"请输入网站名称"},null,8,["value"])]),_:1}),o(r,{label:"网站介绍",name:"description"},{default:l(()=>[o(m,{value:i(e).description,"onUpdate:value":t[2]||(t[2]=d=>i(e).description=d),placeholder:"请输入网站介绍","auto-size":{minRows:2,maxRows:5}},null,8,["value"])]),_:1}),o(r,{label:"网站图标",name:"icon"},{default:l(()=>[o(i(y),{imageInfo:{url:i(e).icon,width:88,height:88},aspectRatio:1,allowClear:"",onUse:x},null,8,["imageInfo"])]),_:1}),o(r,{label:" ",colon:!1},{default:l(()=>[o(f,{type:"primary",onClick:k},{default:l(()=>[v("保存")]),_:1}),o(f,{style:{"margin-left":"10px"},onClick:_},{default:l(()=>[v("重置")]),_:1})]),_:1})]),_:1},8,["model"])])}}},N=R(Z,[["__scopeId","data-v-f43950a4"]]);export{N as default};
