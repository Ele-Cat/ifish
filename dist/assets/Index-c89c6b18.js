import{_ as N,u as V,a as C,t as B}from"./App-7acadd0b.js";import{J as S,r as f,h as a,i as l,s as n,F as p,t as v,b as $,B as r,z as u,C as _,u as g,R as D,O as I,j as O,k as Y,D as H}from"./index-2f0a404c.js";const j={class:"news"},E={class:"news-box"},L={class:"news-title"},M=["title"],R={key:2},z=["href","title"],J={__name:"Index",setup(q){const{useNewsStore:x}=V(),m=S(()=>x.lists.filter(t=>t.visible)),k=(t,s)=>{const d=`https://api.moyuduck.com/hot/top?type=${t.value}`;t.isFetching=!0,t.data=[],C.get(d).then(h=>{const{data:i,code:e}=h.data;e===200&&(t.data=i.hotTops.sort((c,o)=>o.hotValue-c.hotValue),t.updateTime=F(i.time),s&&B({content:`${t.label}拉取成功！`})),t.isFetching=!1}).catch(()=>{t.isFetching=!1})};m.value.forEach(t=>{k(t,!1)});const F=t=>$(t).format("YYYY-MM-DD HH:mm:ss"),y=t=>{if(t){let s=t.toString();return s.indexOf("万")>=0||Number(s)<1e4?s:(Number(s)/1e4).toFixed(1)+"万"}};return(t,s)=>{const d=f("a-spin"),h=f("a-empty"),i=f("perfect-scrollbar");return a(),l("div",j,[n("div",E,[(a(!0),l(p,null,v(m.value,e=>(a(),l("div",{class:"news-item bf",key:e.key},[n("div",L,[n("p",null,r(e.label),1),n("p",{title:`更新时间${e.updateTime}`},[u(r(e.updateTime),1),e.isFetching?(a(),_(g(I),{key:1,title:"拉取中..."})):(a(),_(g(D),{key:0,title:`拉取最新${e.label}`,onClick:c=>k(e,!0)},null,8,["title","onClick"]))],8,M)]),O(i,{class:"scroll-bar"},{default:Y(()=>{var c;return[e.isFetching?(a(),_(d,{key:0,tip:"加载中..."})):!e.isFetching&&!((c=e.data)!=null&&c.length)?(a(),_(h,{key:1,description:"暂无数据"})):(a(),l("div",R,[(a(!0),l(p,null,v(e.data,(o,b)=>(a(),l("a",{class:"news-info",key:b,href:o.url,title:o.title,target:"_blank"},[n("span",null,[u(r(b+1)+".",1),e.value==="历史上的今天"?(a(),l(p,{key:0},[u("【"+r(o.year)+"年】",1)],64)):H("",!0),u(r(o.title),1)]),n("span",null,r(y(o.hotValue)),1)],8,z))),128))]))]}),_:2},1024)]))),128))])])}}},K=N(J,[["__scopeId","data-v-6a601ebe"]]);export{K as default};
