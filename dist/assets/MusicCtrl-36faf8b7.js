import{e as U,f as A,p as k,w as S,r as y,h as o,i as u,q as l,u as t,y as $,x as j,z as p,j as i,k as d,B as L,C as _,F as q}from"./index-0ef10f6d.js";import{_ as H,u as G}from"./App-346024a4.js";import{s as M}from"./utils-7dc22624.js";import{V as J,P as K,a as Q,b as W,M as X}from"./VerticalRightOutlined-aedf41ac.js";const Y={class:"music-box"},Z={key:0,class:"info"},ee={key:1,class:"info"},te=["src"],se={class:"center"},ie={class:"prev-next"},le={class:"progress-box"},ne={class:"ctrl"},oe=["title"],ae={class:"mode"},ue={__name:"MusicCtrl",props:{musicCurrentTime:{type:Number,default:0},musicDuration:{type:Number,default:0},prevMusic:{type:String,default:""},nextMusic:{type:String,default:""},musicMode:{type:String,default:""}},emits:["toggleMusicList","showSearch","handleDurationChange","handlePlay","handlePause","handlePrev","handleNext","showLyric"],setup(c,{emit:r}){const w=c,{useMusicStore:s}=G(),D=U(()=>A(()=>import("./MusicShortkey-203b51b7.js"),["assets/MusicShortkey-203b51b7.js","assets/App-346024a4.js","assets/index-0ef10f6d.js","assets/index-0dc88247.css","assets/App-54093a0b.css","assets/MusicShortkey-f726251f.css"])),v=k(0);S(()=>w.musicCurrentTime,a=>{v.value=a},{immediate:!0,deep:!0});const b=()=>{r("toggleMusicList")},N=()=>{r("showSearch")},C=a=>{s.changeMode(a)},f=a=>{s.toggleMute(a)},g=k({});S(()=>[s.activeIndex,s.settings.playing],()=>{g.value=s.musicList[s.activeIndex]||{}},{immediate:!0,deep:!0});const T=a=>M(a),V=a=>{r("handleDurationChange",a)},I=()=>{r("handlePlay")},O=()=>{r("handlePause")},B=()=>{r("handlePrev")},F=()=>{r("handleNext")},x=()=>{r("showLyric")},h=k(!1),R=()=>{h.value=!0};return(a,e)=>{const m=y("a-tooltip"),P=y("a-slider"),z=y("a-divider"),E=y("IDialog");return o(),u(q,null,[l("div",Y,[t(s).musicList.length?(o(),u("div",ee,[l("div",{class:"cover",onClick:x},[l("img",{class:j({playing:t(s).settings.playing}),src:g.value.cover,onerror:"this.src='./images/music.png'",alt:""},null,10,te)]),$(" "+p(g.value.name)+" - "+p(g.value.singer),1)])):(o(),u("div",Z,[$(" 暂无音乐，请选择"),l("span",{class:"add",onClick:N},"添加")])),l("div",se,[l("div",ie,[i(m,{title:"查看快捷键"},{default:d(()=>[l("i",{class:"ifishfont ifish-music-shortkey",onClick:e[0]||(e[0]=n=>R())})]),_:1}),i(m,{title:`上一首${c.prevMusic?"：":""}${c.prevMusic}`},{default:d(()=>[i(t(J),{onClick:B})]),_:1},8,["title"]),i(m,{title:t(s).settings.playing?"点击暂停":"点击播放"},{default:d(()=>[t(s).settings.playing?(o(),L(t(Q),{key:1,class:"pause",onClick:O})):(o(),L(t(K),{key:0,class:"play",onClick:I}))]),_:1},8,["title"]),i(m,{title:`下一首${c.nextMusic?"：":""}${c.nextMusic}`},{default:d(()=>[i(t(W),{onClick:F})]),_:1},8,["title"]),i(m,{title:"展开歌词"},{default:d(()=>[l("i",{class:"ifishfont ifish-music-lyric",onClick:x})]),_:1})]),l("div",le,[l("p",null,p(t(M)(v.value)),1),i(P,{class:"play-slider",min:0,max:c.musicDuration,onChange:V,value:v.value,"onUpdate:value":e[1]||(e[1]=n=>v.value=n),tipFormatter:T},null,8,["max","value"]),l("p",null,p(t(M)(c.musicDuration)),1)])]),l("div",ne,[l("div",{class:"volume",title:`当前音量：${t(s).settings.volume}`},[t(s).settings.mute||t(s).settings.volume===0?(o(),u("i",{key:0,class:"ifishfont ifish-volumeDisable",onClick:e[2]||(e[2]=n=>f(!0))})):t(s).settings.volume>=0&&t(s).settings.volume<30?(o(),u("i",{key:1,class:"ifishfont ifish-volumeLow",onClick:e[3]||(e[3]=n=>f(!1))})):t(s).settings.volume>=30&&t(s).settings.volume<60?(o(),u("i",{key:2,class:"ifishfont ifish-volumeMiddle",onClick:e[4]||(e[4]=n=>f(!1))})):(o(),u("i",{key:3,class:"ifishfont ifish-volumeHigh",onClick:e[5]||(e[5]=n=>f(!1))})),i(P,{class:"volume-slider",min:0,max:100,value:t(s).settings.volume,"onUpdate:value":e[6]||(e[6]=n=>t(s).settings.volume=n)},null,8,["value"])],8,oe),l("div",ae,[i(m,{title:c.musicMode},{default:d(()=>[t(s).settings.mode==="listCycle"?(o(),u("i",{key:0,class:"ifishfont ifish-musicListLoop",title:"列表循环",onClick:e[7]||(e[7]=n=>C("singleCycle"))})):_("",!0),t(s).settings.mode==="singleCycle"?(o(),u("i",{key:1,class:"ifishfont ifish-musicSingleCycle",title:"单曲循环",onClick:e[8]||(e[8]=n=>C("randomPlay"))})):_("",!0),t(s).settings.mode==="randomPlay"?(o(),u("i",{key:2,class:"ifishfont ifish-musicRandomPlay",title:"随机播放",onClick:e[9]||(e[9]=n=>C("listCycle"))})):_("",!0)]),_:1},8,["title"])]),i(z,{type:"vertical"}),i(m,{title:"播放列表",placement:"topRight"},{default:d(()=>[i(t(X),{onClick:b})]),_:1})])]),i(E,{title:"音乐快捷键",visible:h.value,zIndex:1003,onOk:e[10]||(e[10]=n=>h.value=!1),onCancel:e[11]||(e[11]=n=>h.value=!1)},{default:d(()=>[i(t(D))]),_:1},8,["visible"])],64)}}},ve=H(ue,[["__scopeId","data-v-05839499"]]);export{ve as default};
