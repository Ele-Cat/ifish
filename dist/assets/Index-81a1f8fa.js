import{_ as B,u as C,e as S,a as $,t as D}from"./App-a102ebf9.js";import{J as I,f as h,h as s,i as n,s as l,F as p,t as b,a as O,B as c,z as d,C as u,u as x,R as V,O as Y,j as H,k as j,D as E}from"./index-79c720f7.js";const L={class:"news"},M={class:"news-box"},R={class:"news-title"},z=["title"],J={key:2},q=["href","title"],A={__name:"Index",setup(G){const{useNewsStore:N}=C();S.on("resetNews",()=>{v()});const m=I(()=>N.lists.filter(t=>t.visible)),k=(t,a)=>{const _=`https://dailyhot-api.ahfi.cn/${t.value}`;t.isFetching=!0,t.data=[],$.get(_).then(f=>{const{data:r,code:e}=f.data;e===200&&(t.data=r.sort((i,o)=>o.hot-i.hot),t.updateTime=F(r.updateTime),a&&D({content:`${t.label}拉取成功！`})),t.isFetching=!1}).catch(()=>{t.isFetching=!1})},v=()=>{m.value.forEach(t=>{k(t,!1)})};v();const F=t=>O(t).format("YYYY-MM-DD HH:mm:ss"),y=t=>{if(t){let a=t.toString();return a.indexOf("万")>=0||Number(a)<1e4?a:(Number(a)/1e4).toFixed(1)+"万"}};return(t,a)=>{const _=h("a-spin"),f=h("a-empty"),r=h("perfect-scrollbar");return s(),n("div",L,[l("div",M,[(s(!0),n(p,null,b(m.value,e=>(s(),n("div",{class:"news-item bf",key:e.key},[l("div",R,[l("p",null,c(e.label),1),l("p",{title:`更新时间${e.updateTime}`},[d(c(e.updateTime),1),e.isFetching?(s(),u(x(Y),{key:1,title:"拉取中..."})):(s(),u(x(V),{key:0,title:`拉取最新${e.label}`,onClick:i=>k(e,!0)},null,8,["title","onClick"]))],8,z)]),H(r,{class:"scroll-bar"},{default:j(()=>{var i;return[e.isFetching?(s(),u(_,{key:0,tip:"加载中..."})):!e.isFetching&&!((i=e.data)!=null&&i.length)?(s(),u(f,{key:1,description:"暂无数据"})):(s(),n("div",J,[(s(!0),n(p,null,b(e.data,(o,g)=>(s(),n("a",{class:"news-info",key:g,href:o.url,title:o.title,target:"_blank"},[l("span",null,[d(c(g+1)+".",1),e.value==="历史上的今天"?(s(),n(p,{key:0},[d("【"+c(o.year)+"年】",1)],64)):E("",!0),d(c(o.title),1)]),l("span",null,c(y(o.hot)),1)],8,q))),128))]))]}),_:2},1024)]))),128))])])}}},Q=B(A,[["__scopeId","data-v-41e433c1"]]);export{Q as default};
